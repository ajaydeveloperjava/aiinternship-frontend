<!DOCTYPE html>
<html lang="en">
<head>
<title>InternAI — Create Profile</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root {
    --gold: #c9a96e;
    --gold-light: #e8d5b0;
    --gold-dim: rgba(201,169,110,0.35);
    --gold-glow: rgba(201,169,110,0.15);
    --obsidian: #0a0a0f;
    --deep: #10101a;
    --surface: #14141f;
    --surface2: #1c1c2e;
    --surface3: #22223a;
    --text: #f0ece3;
    --text-muted: #8a8278;
    --border: rgba(201,169,110,0.2);
    --border-subtle: rgba(201,169,110,0.08);
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }

body {
    font-family: 'Montserrat', sans-serif;
    background: var(--obsidian);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 48px 20px 60px;
    position: relative;
    overflow-x: hidden;
}

/* ── AMBIENT BACKGROUND ── */
.bg-ambient { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
.bg-orb { position: absolute; border-radius: 50%; filter: blur(100px); animation: drift 16s ease-in-out infinite alternate; }
.bg-orb-1 { width: 700px; height: 700px; background: radial-gradient(circle, rgba(201,169,110,0.09), transparent); top: -25%; right: -15%; animation-delay: 0s; }
.bg-orb-2 { width: 450px; height: 450px; background: radial-gradient(circle, rgba(90,60,180,0.07), transparent); bottom: 0; left: -10%; animation-delay: -7s; }
.bg-orb-3 { width: 300px; height: 300px; background: radial-gradient(circle, rgba(201,169,110,0.05), transparent); top: 60%; left: 50%; animation-delay: -13s; }

@keyframes drift {
    from { transform: translate(0,0) scale(1); }
    to   { transform: translate(28px,-20px) scale(1.05); }
}

.bg-grain {
    position: fixed; inset: 0; pointer-events: none; z-index: 1; opacity: 0.028;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}

/* ── FLOATING GOLD PARTICLES ── */
.particles { position: fixed; inset: 0; pointer-events: none; z-index: 1; overflow: hidden; }
.particle {
    position: absolute;
    width: 2px; height: 2px;
    background: var(--gold);
    border-radius: 50%;
    opacity: 0;
    animation: floatUp linear infinite;
}

@keyframes floatUp {
    0%   { opacity: 0; transform: translateY(0) translateX(0); }
    10%  { opacity: 0.6; }
    90%  { opacity: 0.3; }
    100% { opacity: 0; transform: translateY(-100vh) translateX(30px); }
}

/* ── CARD ── */
.card {
    position: relative;
    z-index: 2;
    width: 100%;
    max-width: 520px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 3px;
    padding: 52px 48px 56px;
    box-shadow:
        0 0 0 1px rgba(201,169,110,0.05),
        0 40px 80px rgba(0,0,0,0.6),
        0 0 60px rgba(201,169,110,0.04);
    opacity: 0;
    transform: translateY(32px);
    animation: cardReveal 0.9s cubic-bezier(0.16,1,0.3,1) 0.1s forwards;
}

/* animated top shimmer */
.card::before {
    content: '';
    position: absolute; top: 0; left: -100%; right: 0; height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), var(--gold-light), var(--gold), transparent);
    animation: shimmerLine 3s ease-in-out infinite 1s;
}

/* bottom-right corner */
.card::after {
    content: '';
    position: absolute; bottom: 0; right: 0;
    width: 32px; height: 32px;
    border-bottom: 1px solid var(--gold);
    border-right: 1px solid var(--gold);
}

/* top-left corner */
.corner-tl {
    position: absolute; top: 0; left: 0;
    width: 28px; height: 28px;
    border-top: 1px solid var(--gold);
    border-left: 1px solid var(--gold);
}

@keyframes shimmerLine {
    0%   { left: -100%; }
    60%  { left: 100%; }
    100% { left: 100%; }
}

@keyframes cardReveal {
    to { opacity: 1; transform: translateY(0); }
}

/* ── HEADER ── */
.card-header {
    text-align: center;
    margin-bottom: 44px;
    position: relative;
}

/* gold orbital ring around icon */
.icon-orbit {
    width: 88px; height: 88px;
    margin: 0 auto 28px;
    position: relative;
}

.icon-orbit::before {
    content: '';
    position: absolute; inset: -8px;
    border-radius: 50%;
    border: 1px solid var(--border);
    animation: orbitSpin 8s linear infinite;
}

.icon-orbit::after {
    content: '';
    position: absolute; inset: -16px;
    border-radius: 50%;
    border: 1px dashed rgba(201,169,110,0.12);
    animation: orbitSpin 14s linear infinite reverse;
}

@keyframes orbitSpin {
    from { transform: rotate(0deg); }
    to   { transform: rotate(360deg); }
}

/* spinning dot on orbit */
.orbit-dot {
    position: absolute;
    width: 5px; height: 5px;
    background: var(--gold);
    border-radius: 50%;
    top: -20px; left: calc(50% - 2.5px);
    animation: orbitSpin 8s linear infinite;
    transform-origin: 2.5px 52px;
    box-shadow: 0 0 6px var(--gold);
}

.icon-wrap {
    width: 88px; height: 88px;
    border: 1px solid var(--border);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    background: var(--surface2);
    position: relative;
    animation: iconPulse 4s ease-in-out infinite;
}

@keyframes iconPulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(201,169,110,0); }
    50%       { box-shadow: 0 0 0 8px rgba(201,169,110,0.06); }
}

.icon-wrap i { font-size: 30px; color: var(--gold); }

/* brand mark in header */
.brand-row {
    display: flex; align-items: center; justify-content: center;
    gap: 10px; margin-bottom: 14px;
}
.brand-name {
    font-family: 'Cormorant Garamond', serif;
    font-size: 15px; font-weight: 300;
    letter-spacing: 0.15em; text-transform: uppercase; color: var(--text-muted);
}
.brand-name span { color: var(--gold); }
.brand-sep { width: 1px; height: 12px; background: var(--border); }

.card-eyebrow {
    font-size: 9px; font-weight: 500; letter-spacing: 0.35em; text-transform: uppercase;
    color: var(--gold); margin-bottom: 8px;
    display: flex; align-items: center; justify-content: center; gap: 8px;
}
.card-eyebrow::before, .card-eyebrow::after {
    content: ''; display: inline-block; width: 16px; height: 1px; background: var(--gold); opacity: 0.6;
}

.card-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 36px; font-weight: 300; line-height: 1.08;
    color: var(--text); letter-spacing: 0.02em;
}
.card-title em { font-style: italic; color: var(--gold); }

.card-sub {
    margin-top: 8px; font-size: 11px; font-weight: 300;
    color: var(--text-muted); letter-spacing: 0.07em;
}

/* ── SECTION LABEL ── */
.section-label {
    display: flex; align-items: center; gap: 10px;
    margin: 32px 0 24px;
}
.section-label-line { flex: 1; height: 1px; background: var(--border-subtle); }
.section-label-text {
    font-size: 8px; font-weight: 500; letter-spacing: 0.28em;
    text-transform: uppercase; color: var(--text-muted);
}
.section-label-dot { width: 3px; height: 3px; background: var(--gold); border-radius: 50%; }

/* ── FORM GROUPS ── */
.form-group {
    position: relative;
    margin-bottom: 18px;
    opacity: 0;
    transform: translateX(-14px);
    animation: slideIn 0.5s cubic-bezier(0.16,1,0.3,1) forwards;
}

@keyframes slideIn {
    to { opacity: 1; transform: translateX(0); }
}

/* stagger each field */
.form-group:nth-child(1) { animation-delay: 0.55s; }
.form-group:nth-child(2) { animation-delay: 0.65s; }
.form-group:nth-child(3) { animation-delay: 0.75s; }
.form-group:nth-child(4) { animation-delay: 0.85s; }
.form-group:nth-child(5) { animation-delay: 0.95s; }
.form-group:nth-child(6) { animation-delay: 1.05s; }
.form-group:nth-child(7) { animation-delay: 1.15s; }
.form-group:nth-child(8) { animation-delay: 1.25s; }

.field-label {
    display: block;
    font-size: 8px; font-weight: 600; letter-spacing: 0.28em;
    text-transform: uppercase; color: var(--text-muted);
    margin-bottom: 8px;
    transition: color 0.3s;
}

.form-group:focus-within .field-label { color: var(--gold); }

.input-wrapper { position: relative; }

/* gold left accent bar */
.input-wrapper::before {
    content: '';
    position: absolute; left: 0; top: 0; bottom: 0;
    width: 2px; background: transparent;
    transition: background 0.3s ease;
    border-radius: 0;
}
.form-group:focus-within .input-wrapper::before { background: var(--gold); }

.input-icon {
    position: absolute; left: 16px; top: 50%; transform: translateY(-50%);
    color: var(--text-muted); font-size: 13px;
    transition: color 0.3s; pointer-events: none; z-index: 2;
}

input {
    width: 100%;
    padding: 14px 18px 14px 42px;
    background: var(--surface2);
    border: 1px solid rgba(201,169,110,0.12);
    border-radius: 2px;
    font-size: 13px; font-family: 'Montserrat', sans-serif;
    font-weight: 400; color: var(--text);
    letter-spacing: 0.04em;
    transition: all 0.3s ease;
    caret-color: var(--gold);
}

input:focus {
    outline: none;
    border-color: var(--gold);
    background: rgba(201,169,110,0.04);
    box-shadow: 0 0 0 1px rgba(201,169,110,0.1), 0 4px 20px rgba(0,0,0,0.3);
}

input:focus + .input-icon { color: var(--gold); }
input::placeholder { color: transparent; }

/* filled indicator dot */
.fill-dot {
    position: absolute; right: 14px; top: 50%; transform: translateY(-50%);
    width: 5px; height: 5px; border-radius: 50%;
    background: transparent; transition: background 0.3s;
    pointer-events: none;
}
input:not(:placeholder-shown) ~ .fill-dot { background: var(--gold); }

/* ── SUBMIT BUTTON ── */
.btn-wrap {
    margin-top: 36px;
    opacity: 0;
    animation: fadeUp 0.6s ease 1.4s forwards;
}

@keyframes fadeUp {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
}

.primary-btn {
    width: 100%;
    padding: 16px 24px;
    background: transparent;
    color: var(--gold);
    border: 1px solid var(--gold);
    border-radius: 2px;
    font-size: 10px; font-family: 'Montserrat', sans-serif;
    font-weight: 700; letter-spacing: 0.35em; text-transform: uppercase;
    cursor: pointer;
    position: relative; overflow: hidden;
    display: flex; align-items: center; justify-content: center; gap: 10px;
    transition: color 0.45s;
}

/* fill animation */
.primary-btn::before {
    content: '';
    position: absolute; inset: 0;
    background: var(--gold);
    transform: scaleX(0); transform-origin: left;
    transition: transform 0.45s cubic-bezier(0.16,1,0.3,1);
}

.primary-btn:hover { color: var(--obsidian); }
.primary-btn:hover::before { transform: scaleX(1); }

/* shimmer sweep on hover */
.primary-btn::after {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
    transform: translateX(-100%);
    transition: transform 0s;
}
.primary-btn:hover::after {
    transition: transform 0.5s ease 0.1s;
    transform: translateX(100%);
}

.primary-btn i, .primary-btn span { position: relative; z-index: 1; }

.primary-btn.loading {
    pointer-events: none; opacity: 0.65;
}

/* progress stripe on loading */
.progress-stripe {
    position: absolute; top: 0; left: 0; height: 1px;
    width: 0; background: var(--gold);
    transition: width 0.3s;
    z-index: 3;
}
.card.is-loading .progress-stripe {
    width: 80%;
    transition: width 2s ease;
}

/* ── RESPONSIVE ── */
@media (max-width: 540px) {
    .card { padding: 40px 28px 48px; }
    .card-title { font-size: 30px; }
    body { padding: 24px 16px 48px; }
}

/* ── SCROLLBAR ── */
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: var(--deep); }
::-webkit-scrollbar-thumb { background: rgba(201,169,110,0.2); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: rgba(201,169,110,0.4); }
</style>
</head>

<body>

<div class="bg-ambient">
    <div class="bg-orb bg-orb-1"></div>
    <div class="bg-orb bg-orb-2"></div>
    <div class="bg-orb bg-orb-3"></div>
</div>
<div class="bg-grain"></div>

<!-- Floating particles -->
<div class="particles" id="particles"></div>

<div class="card" id="mainCard">
    <div class="corner-tl"></div>
    <div class="progress-stripe" id="progressStripe"></div>

    <!-- Header -->
    <div class="card-header">
        <div class="brand-row">
            <span class="brand-name">Intern<span>AI</span></span>
            <div class="brand-sep"></div>
            <span class="brand-name" style="font-size:11px;">Student Portal</span>
        </div>

        <div class="icon-orbit">
            <div class="orbit-dot"></div>
            <div class="icon-wrap">
                <i class="fas fa-user-graduate"></i>
            </div>
        </div>

        <div class="card-eyebrow" id="eyebrow">New Profile</div>
        <h2 class="card-title" id="title">Complete your<br><em>profile</em></h2>
        <p class="card-sub" id="subtitle">Add your academic & professional details</p>
    </div>

    <form id="profileForm" autocomplete="off">

        <!-- Academic section -->
        <div class="section-label">
            <div class="section-label-line"></div>
            <div class="section-label-dot"></div>
            <div class="section-label-text">Academic Details</div>
            <div class="section-label-dot"></div>
            <div class="section-label-line"></div>
        </div>

        <div class="form-group">
            <label class="field-label">College / University</label>
            <div class="input-wrapper">
                <input type="text" id="collegeName" placeholder=" " required>
                <i class="fas fa-university input-icon"></i>
                <span class="fill-dot"></span>
            </div>
        </div>

        <div class="form-group">
            <label class="field-label">Degree</label>
            <div class="input-wrapper">
                <input type="text" id="degree" placeholder=" " required>
                <i class="fas fa-graduation-cap input-icon"></i>
                <span class="fill-dot"></span>
            </div>
        </div>

        <div class="form-group">
            <label class="field-label">Department / Branch</label>
            <div class="input-wrapper">
                <input type="text" id="department" placeholder=" " required>
                <i class="fas fa-building-columns input-icon"></i>
                <span class="fill-dot"></span>
            </div>
        </div>

        <div class="form-group">
            <label class="field-label">Year of Study</label>
            <div class="input-wrapper">
                <input type="text" id="yearOfStudy" placeholder=" " required>
                <i class="fas fa-calendar-alt input-icon"></i>
                <span class="fill-dot"></span>
            </div>
        </div>

        <div class="form-group">
            <label class="field-label">CGPA</label>
            <div class="input-wrapper">
                <input type="number" step="0.01" id="cgpa" placeholder=" " min="0" max="10" required>
                <i class="fas fa-chart-line input-icon"></i>
                <span class="fill-dot"></span>
            </div>
        </div>

        <!-- Professional section -->
        <div class="section-label">
            <div class="section-label-line"></div>
            <div class="section-label-dot"></div>
            <div class="section-label-text">Professional Details</div>
            <div class="section-label-dot"></div>
            <div class="section-label-line"></div>
        </div>

        <div class="form-group">
            <label class="field-label">Skills (comma separated)</label>
            <div class="input-wrapper">
                <input type="text" id="skills" placeholder=" " required>
                <i class="fas fa-code input-icon"></i>
                <span class="fill-dot"></span>
            </div>
        </div>

        <div class="form-group">
            <label class="field-label">Preferred Location</label>
            <div class="input-wrapper">
                <input type="text" id="preferredLocation" placeholder=" " required>
                <i class="fas fa-location-dot input-icon"></i>
                <span class="fill-dot"></span>
            </div>
        </div>

        <div class="form-group">
            <label class="field-label">Resume File Name</label>
            <div class="input-wrapper">
                <input type="text" id="resumeFileName" placeholder=" " required>
                <i class="fas fa-file-pdf input-icon"></i>
                <span class="fill-dot"></span>
            </div>
        </div>

        <div class="btn-wrap">
            <button type="submit" id="submitBtn" class="primary-btn">
                <i class="fas fa-paper-plane"></i>
                <span id="btnLabel">Submit Profile</span>
            </button>
        </div>

    </form>
</div>

<script>
/* ── Backend Base URL ── */
const BASE_URL = "https://aiinternship-backend-5.onrender.com";

/* ── Particles ── */
const particleContainer = document.getElementById('particles');
for (let i = 0; i < 22; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = Math.random() * 100 + 'vw';
    p.style.bottom = '-4px';
    p.style.animationDuration = (8 + Math.random() * 14) + 's';
    p.style.animationDelay = (Math.random() * 12) + 's';
    p.style.width = p.style.height = (Math.random() > 0.6 ? 3 : 2) + 'px';
    particleContainer.appendChild(p);
}

/* ── Auth & Prefill ── */
const email = localStorage.getItem("userEmail");
let isUpdate = false;

if (!email) {
    window.location.href = "student-login.html";
}

/* Fetch existing profile */
fetch(`${BASE_URL}/api/students/profile?email=${email}`)
.then(res => {
    if (!res.ok) return null;
    return res.json();
})
.then(data => {
    if (data && data.profileCompleted) {
        isUpdate = true;

        document.getElementById("eyebrow").textContent = "Update Profile";
        document.getElementById("title").innerHTML = 'Update your<br><em>profile</em>';
        document.getElementById("subtitle").textContent = "Edit your professional details below";
        document.getElementById("btnLabel").textContent = "Save Changes";

        document.getElementById("collegeName").value       = data.collegeName       || "";
        document.getElementById("degree").value            = data.degree            || "";
        document.getElementById("department").value        = data.department        || "";
        document.getElementById("yearOfStudy").value       = data.yearOfStudy       || "";
        document.getElementById("cgpa").value              = data.cgpa              || "";
        document.getElementById("skills").value            = data.skills            || "";
        document.getElementById("preferredLocation").value = data.preferredLocation || "";
        document.getElementById("resumeFileName").value    = data.resumeFileName    || "";
    }
})
.catch(err => {
    console.log("Profile fetch failed:", err);
});

/* ── Form Submit ── */
document.getElementById("profileForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const btn   = document.getElementById("submitBtn");
    const card  = document.getElementById("mainCard");
    const label = document.getElementById("btnLabel");

    btn.classList.add("loading");
    label.textContent = "Processing…";
    card.classList.add("is-loading");

    const profileData = {
        email: email,
        collegeName:       document.getElementById("collegeName").value,
        degree:            document.getElementById("degree").value,
        department:        document.getElementById("department").value,
        yearOfStudy:       document.getElementById("yearOfStudy").value,
        cgpa:              document.getElementById("cgpa").value,
        skills:            document.getElementById("skills").value,
        preferredLocation: document.getElementById("preferredLocation").value,
        resumeFileName:    document.getElementById("resumeFileName").value
    };

    const url = isUpdate
        ? `${BASE_URL}/api/students/updateProfile`
        : `${BASE_URL}/api/students/createProfile`;

    fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(profileData)
    })
    .then(res => res.text())
    .then(data => {
        alert(data);
        window.location.href = "student-home.html";
    })
    .catch(err => {
        console.error("Profile submit failed:", err);
        alert("Something went wrong. Please try again.");
        btn.classList.remove("loading");
        label.textContent = isUpdate ? "Save Changes" : "Submit Profile";
        card.classList.remove("is-loading");
    });
});
</script>

</body>
</html>