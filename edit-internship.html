<!DOCTYPE html>
<html lang="en">
<head>
<title>InternAI — Manage Internships</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root {
    --gold: #c9a96e;
    --gold-light: #e8d5b0;
    --gold-dark: #9a7a45;
    --obsidian: #0a0a0f;
    --deep: #10101a;
    --surface: #14141f;
    --surface2: #1c1c2e;
    --surface3: #22223a;
    --text: #f0ece3;
    --text-muted: #8a8278;
    --border: rgba(201,169,110,0.18);
    --border-subtle: rgba(201,169,110,0.08);
    --red: rgba(239,68,68,0.85);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Montserrat', sans-serif;
    background: var(--obsidian);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
}

/* ── AMBIENT ── */
.bg-ambient { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
.bg-orb { position: absolute; border-radius: 50%; filter: blur(100px); animation: drift 15s ease-in-out infinite alternate; }
.bg-orb-1 { width: 650px; height: 650px; background: radial-gradient(circle, rgba(201,169,110,0.1), transparent); top: -20%; right: -10%; animation-delay: 0s; }
.bg-orb-2 { width: 400px; height: 400px; background: radial-gradient(circle, rgba(42,79,201,0.07), transparent); bottom: 0; left: -8%; animation-delay: -7s; }
.bg-orb-3 { width: 280px; height: 280px; background: radial-gradient(circle, rgba(201,169,110,0.05), transparent); top: 55%; left: 45%; animation-delay: -13s; }

@keyframes drift {
    from { transform: translate(0,0) scale(1); }
    to   { transform: translate(25px,-18px) scale(1.04); }
}

.bg-grain {
    position: fixed; inset: 0; pointer-events: none; z-index: 1; opacity: 0.025;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}

/* ── NAVBAR ── */
.navbar {
    position: sticky; top: 0; z-index: 100;
    background: rgba(10,10,15,0.88);
    backdrop-filter: blur(24px);
    border-bottom: 1px solid var(--border);
    padding: 0 60px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 72px;
}

.logo { display: flex; align-items: center; gap: 14px; text-decoration: none; }

.logo-mark {
    width: 38px; height: 38px;
    border: 1px solid var(--gold);
    display: flex; align-items: center; justify-content: center;
    position: relative; flex-shrink: 0;
}
.logo-mark::before { content: ''; position: absolute; top:-3px; left:-3px; width:5px; height:5px; background:var(--gold); }
.logo-mark::after  { content: ''; position: absolute; bottom:-3px; right:-3px; width:5px; height:5px; background:var(--gold); }
.logo-mark i { color: var(--gold); font-size: 14px; }

.logo-text {
    font-family: 'Cormorant Garamond', serif;
    font-size: 22px; font-weight: 300;
    letter-spacing: 0.1em; text-transform: uppercase; color: var(--text);
}
.logo-text span { color: var(--gold); }

.nav-right { display: flex; align-items: center; gap: 14px; }

.nav-back {
    display: flex; align-items: center; gap: 8px;
    font-size: 10px; font-weight: 500; letter-spacing: 0.22em; text-transform: uppercase;
    color: var(--text-muted);
    background: var(--surface2);
    border: 1px solid var(--border-subtle);
    padding: 8px 16px; border-radius: 2px;
    text-decoration: none;
    transition: all 0.3s;
}
.nav-back:hover { color: var(--gold); border-color: var(--border); }
.nav-back i { font-size: 10px; }

.post-btn {
    display: flex; align-items: center; gap: 8px;
    font-size: 10px; font-weight: 600; letter-spacing: 0.25em; text-transform: uppercase;
    color: var(--gold); background: transparent;
    border: 1px solid var(--gold); padding: 8px 18px; border-radius: 2px;
    cursor: pointer; text-decoration: none; position: relative; overflow: hidden;
    transition: color 0.4s;
}
.post-btn::before {
    content: ''; position: absolute; inset: 0;
    background: var(--gold); transform: scaleX(0); transform-origin: left;
    transition: transform 0.4s cubic-bezier(0.16,1,0.3,1);
}
.post-btn:hover { color: var(--obsidian); }
.post-btn:hover::before { transform: scaleX(1); }
.post-btn i, .post-btn span { position: relative; z-index: 1; }

/* ── PAGE HEADER ── */
.page-header {
    position: relative; z-index: 2;
    padding: 64px 60px 52px;
    border-bottom: 1px solid var(--border-subtle);
    overflow: hidden;
}

.page-header::before {
    content: '';
    position: absolute; inset: 0;
    background:
        repeating-linear-gradient(0deg, transparent, transparent 60px, rgba(201,169,110,0.022) 60px, rgba(201,169,110,0.022) 61px),
        repeating-linear-gradient(90deg, transparent, transparent 60px, rgba(201,169,110,0.022) 60px, rgba(201,169,110,0.022) 61px);
}

.page-header-inner {
    position: relative; z-index: 2;
    max-width: 1200px; margin: 0 auto;
    display: flex; justify-content: space-between; align-items: flex-end; gap: 40px;
}

.header-left {}

.page-eyebrow {
    font-size: 9px; font-weight: 500; letter-spacing: 0.35em; text-transform: uppercase;
    color: var(--gold); margin-bottom: 12px;
    display: flex; align-items: center; gap: 10px;
}
.page-eyebrow::before {
    content: ''; display: inline-block; width: 24px; height: 1px; background: var(--gold);
}

.page-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 50px; font-weight: 300; line-height: 1.06;
    color: var(--text); letter-spacing: 0.02em;
    opacity: 0; transform: translateY(24px);
    animation: fadeUp 0.8s cubic-bezier(0.16,1,0.3,1) 0.1s forwards;
}
.page-title em { font-style: italic; color: var(--gold); }

.page-sub {
    margin-top: 12px; font-size: 12px; font-weight: 300;
    color: var(--text-muted); letter-spacing: 0.06em; line-height: 1.8;
    opacity: 0;
    animation: fadeUp 0.8s cubic-bezier(0.16,1,0.3,1) 0.25s forwards;
}

.count-badge {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    background: var(--surface); border: 1px solid var(--border);
    padding: 20px 32px; border-radius: 3px; min-width: 130px;
    position: relative;
    opacity: 0;
    animation: fadeUp 0.8s cubic-bezier(0.16,1,0.3,1) 0.35s forwards;
}
.count-badge::after {
    content: ''; position: absolute; bottom: -3px; right: -3px;
    width: 6px; height: 6px; background: var(--gold);
}
.count-num {
    font-family: 'Cormorant Garamond', serif;
    font-size: 42px; font-weight: 300; color: var(--gold); line-height: 1;
    margin-bottom: 4px;
}
.count-lbl {
    font-size: 8px; font-weight: 500; letter-spacing: 0.22em;
    text-transform: uppercase; color: var(--text-muted);
}

@keyframes fadeUp {
    to { opacity: 1; transform: translateY(0); }
}

/* ── CONTAINER ── */
.container {
    position: relative; z-index: 2;
    max-width: 1200px; margin: 0 auto;
    padding: 60px 60px 80px;
}

/* section divider */
.section-label {
    display: flex; align-items: center; gap: 14px; margin-bottom: 32px;
}
.section-label-line { flex: 1; height: 1px; background: var(--border-subtle); }
.section-label-text {
    font-size: 9px; font-weight: 500; letter-spacing: 0.3em;
    text-transform: uppercase; color: var(--text-muted); white-space: nowrap;
}
.section-label-dot { width: 4px; height: 4px; background: var(--gold); border-radius: 50%; flex-shrink: 0; }

/* ── GRID ── */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
    gap: 1px;
    background: var(--border-subtle);
}

/* ── CARD ── */
.card {
    background: var(--surface);
    padding: 40px;
    position: relative;
    transition: background 0.3s ease;
    overflow: hidden;
    opacity: 0; transform: translateY(20px);
    animation: fadeUp 0.6s cubic-bezier(0.16,1,0.3,1) forwards;
}

.card:hover { background: rgba(201,169,110,0.03); }

/* top gold line on hover */
.card::before {
    content: ''; position: absolute;
    top: 0; left: 0; right: 0; height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
    opacity: 0; transition: opacity 0.4s;
}
.card:hover::before { opacity: 1; }

/* card index watermark */
.card-index {
    position: absolute; top: 24px; right: 28px;
    font-family: 'Cormorant Garamond', serif;
    font-size: 56px; font-weight: 300;
    color: rgba(201,169,110,0.07); line-height: 1;
    pointer-events: none;
}

/* status pill */
.status-pill {
    display: inline-flex; align-items: center; gap: 6px;
    font-size: 8px; font-weight: 600; letter-spacing: 0.22em; text-transform: uppercase;
    color: #6ee7b7;
    background: rgba(16,185,129,0.08);
    border: 1px solid rgba(16,185,129,0.2);
    padding: 4px 10px; border-radius: 1px;
    margin-bottom: 16px;
}
.status-dot { width: 4px; height: 4px; background: #6ee7b7; border-radius: 50%; }

.role {
    font-family: 'Cormorant Garamond', serif;
    font-size: 28px; font-weight: 400;
    color: var(--text); letter-spacing: 0.03em;
    line-height: 1.15; margin-bottom: 6px;
}

.company-tag {
    font-size: 10px; font-weight: 500; letter-spacing: 0.15em;
    text-transform: uppercase; color: var(--gold); margin-bottom: 24px;
}

/* meta chips */
.meta {
    display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 28px;
}

.meta-item {
    display: flex; align-items: center; gap: 7px;
    font-size: 10px; font-weight: 400; letter-spacing: 0.08em;
    color: var(--text-muted);
    background: var(--surface2);
    border: 1px solid var(--border-subtle);
    padding: 7px 14px; border-radius: 1px;
    transition: all 0.25s;
}
.meta-item:hover { color: var(--gold); border-color: var(--border); }
.meta-item i { font-size: 10px; color: var(--gold); opacity: 0.7; }

/* divider */
.card-divider {
    height: 1px; background: var(--border-subtle); margin-bottom: 24px;
}

/* action buttons */
.actions {
    display: flex; gap: 10px;
}

.btn {
    flex: 1; padding: 13px 18px;
    background: transparent; border-radius: 2px;
    font-size: 9px; font-family: 'Montserrat', sans-serif;
    font-weight: 600; letter-spacing: 0.28em; text-transform: uppercase;
    cursor: pointer; position: relative; overflow: hidden;
    display: flex; align-items: center; justify-content: center; gap: 8px;
    transition: color 0.4s;
}
.btn i, .btn span { position: relative; z-index: 1; }
.btn::before {
    content: ''; position: absolute; inset: 0;
    transform: scaleX(0); transform-origin: left;
    transition: transform 0.4s cubic-bezier(0.16,1,0.3,1);
}

.btn-edit {
    color: var(--gold);
    border: 1px solid rgba(201,169,110,0.4);
}
.btn-edit::before { background: var(--gold); }
.btn-edit:hover { color: var(--obsidian); border-color: var(--gold); }
.btn-edit:hover::before { transform: scaleX(1); }

.btn-delete {
    color: #fca5a5;
    border: 1px solid rgba(239,68,68,0.25);
}
.btn-delete::before { background: rgba(239,68,68,0.85); }
.btn-delete:hover { color: white; border-color: rgba(239,68,68,0.6); }
.btn-delete:hover::before { transform: scaleX(1); }

/* ── EMPTY STATE ── */
.empty-state {
    grid-column: 1 / -1;
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 100px 60px;
    text-align: center;
    position: relative;
    display: none;
}

.empty-state::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0; height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
}

.empty-icon-ring {
    width: 90px; height: 90px;
    border: 1px solid var(--border);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    margin: 0 auto 28px;
    position: relative;
}
.empty-icon-ring::before {
    content: '';
    position: absolute; top: -5px; left: -5px; right: -5px; bottom: -5px;
    border: 1px solid var(--border-subtle); border-radius: 50%;
}
.empty-icon-ring i { font-size: 28px; color: var(--gold); opacity: 0.5; }

.empty-state h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 30px; font-weight: 300;
    color: var(--text); letter-spacing: 0.04em; margin-bottom: 12px;
}

.empty-state p {
    font-size: 12px; font-weight: 300;
    color: var(--text-muted); letter-spacing: 0.06em;
    line-height: 1.85; max-width: 360px; margin: 0 auto 32px;
}

.empty-action {
    display: inline-flex; align-items: center; gap: 10px;
    font-size: 10px; font-weight: 600; letter-spacing: 0.28em; text-transform: uppercase;
    color: var(--gold); border: 1px solid var(--gold);
    padding: 13px 28px; border-radius: 2px; text-decoration: none;
    position: relative; overflow: hidden; transition: color 0.4s;
}
.empty-action::before {
    content: ''; position: absolute; inset: 0;
    background: var(--gold); transform: scaleX(0); transform-origin: left;
    transition: transform 0.4s cubic-bezier(0.16,1,0.3,1);
}
.empty-action:hover { color: var(--obsidian); }
.empty-action:hover::before { transform: scaleX(1); }
.empty-action i, .empty-action span { position: relative; z-index: 1; }

/* ── ERROR STATE ── */
.error-state {
    grid-column: 1 / -1;
    background: var(--surface);
    border: 1px solid rgba(239,68,68,0.2);
    padding: 60px 40px;
    text-align: center;
    border-radius: 2px;
    display: none;
}
.error-state i { font-size: 36px; color: #f87171; opacity: 0.6; margin-bottom: 16px; }
.error-state p { font-size: 12px; color: var(--text-muted); letter-spacing: 0.06em; }

/* ── FOOTER ── */
.footer {
    position: relative; z-index: 2;
    border-top: 1px solid var(--border-subtle);
    padding: 28px 60px;
    display: flex; justify-content: space-between; align-items: center;
}
.footer-text { font-size: 9px; letter-spacing: 0.18em; text-transform: uppercase; color: var(--text-muted); }
.footer-dot { width: 4px; height: 4px; background: var(--gold); border-radius: 50%; opacity: 0.4; }

/* ── SCROLLBAR ── */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--deep); }
::-webkit-scrollbar-thumb { background: rgba(201,169,110,0.25); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: rgba(201,169,110,0.45); }

/* ── RESPONSIVE ── */
@media (max-width: 900px) {
    .navbar { padding: 0 24px; }
    .page-header { padding: 52px 24px 40px; }
    .page-header-inner { flex-direction: column; align-items: flex-start; }
    .page-title { font-size: 38px; }
    .container { padding: 40px 24px 60px; }
    .grid { grid-template-columns: 1fr; }
    .card { padding: 32px 28px; }
    .footer { padding: 24px; flex-direction: column; gap: 10px; }
}

@media (max-width: 480px) {
    .page-title { font-size: 30px; }
    .actions { flex-direction: column; }
}
</style>
</head>

<body>

<div class="bg-ambient">
    <div class="bg-orb bg-orb-1"></div>
    <div class="bg-orb bg-orb-2"></div>
    <div class="bg-orb bg-orb-3"></div>
</div>
<div class="bg-grain"></div>

<!-- NAVBAR -->
<nav class="navbar">
    <a class="logo" href="company-home.html">
        <div class="logo-mark"><i class="fas fa-brain"></i></div>
        <div class="logo-text">Intern<span>AI</span></div>
    </a>
    <div class="nav-right">
        <a href="company-home.html" class="nav-back">
            <i class="fas fa-arrow-left"></i> Dashboard
        </a>
        <a href="company-post-Internship.html" class="post-btn">
            <i class="fas fa-plus"></i>
            <span>Post New</span>
        </a>
    </div>
</nav>

<!-- PAGE HEADER -->
<header class="page-header">
    <div class="page-header-inner">
        <div class="header-left">
            <div class="page-eyebrow">Internship Management</div>
            <h1 class="page-title">Your active<br><em>listings</em></h1>
            <p class="page-sub">Edit, update, or remove your posted internships. Full control over your talent acquisition pipeline.</p>
        </div>
        <div class="count-badge">
            <div class="count-num" id="countNum">—</div>
            <div class="count-lbl">Active Listings</div>
        </div>
    </div>
</header>

<!-- MAIN -->
<div class="container">

    <div class="section-label">
        <div class="section-label-line"></div>
        <div class="section-label-dot"></div>
        <div class="section-label-text">All Internships</div>
        <div class="section-label-dot"></div>
        <div class="section-label-line"></div>
    </div>

    <div class="grid" id="list">

        <div class="empty-state" id="emptyState">
            <div class="empty-icon-ring"><i class="fas fa-clipboard-list"></i></div>
            <h3>No active listings yet</h3>
            <p>Post your first internship opportunity and connect with exceptional candidates through our AI matching engine.</p>
            <a href="company-post-Internship.html" class="empty-action">
                <i class="fas fa-plus"></i>
                <span>Post First Internship</span>
            </a>
        </div>

        <div class="error-state" id="errorState">
            <i class="fas fa-triangle-exclamation"></i>
            <p>Unable to load internships. Please refresh the page.</p>
        </div>

    </div>
</div>

<!-- FOOTER -->
<footer class="footer">
    <div class="footer-text">© 2025 InternAI &nbsp;·&nbsp; Intelligent Talent Platform</div>
    <div class="footer-dot"></div>
    <div class="footer-text">Manage Portal</div>
</footer>

<script>
const BASE_URL = "https://aiinternship-backend-5.onrender.com";

const email = localStorage.getItem("companyEmail");
if (!email) window.location.href = "company-login.html";

fetch(`${BASE_URL}/api/internships/company?email=${email}`)
.then(res => {
    if (!res.ok) throw new Error("Failed to fetch internships");
    return res.json();
})
.then(data => {
    const list = document.getElementById("list");
    const emptyState = document.getElementById("emptyState");
    const countNum = document.getElementById("countNum");

    list.innerHTML = "";
    countNum.textContent = data.length;

    if (data.length === 0) {
        emptyState.style.display = "block";
        list.appendChild(emptyState);
        return;
    }

    data.forEach((i, idx) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.style.animationDelay = `${idx * 0.08}s`;
        card.innerHTML = `
            <div class="card-index">${String(idx + 1).padStart(2, '0')}</div>

            <div class="status-pill">
                <div class="status-dot"></div>
                Active
            </div>

            <div class="role">${i.role}</div>
            <div class="company-tag">
                <i class="fas fa-building" style="margin-right:6px;opacity:0.6"></i>
                ${i.companyName || "InternAI Partner"}
            </div>

            <div class="meta">
                <div class="meta-item">
                    <i class="fas fa-location-dot"></i>
                    ${i.location || "Remote"}
                </div>
                <div class="meta-item">
                    <i class="fas fa-clock"></i>
                    ${i.duration || "Flexible"}
                </div>
                <div class="meta-item">
                    <i class="fas fa-graduation-cap"></i>
                    CGPA ≥ ${i.cgpa || "Any"}
                </div>
            </div>

            <div class="card-divider"></div>

            <div class="actions">
                <button class="btn btn-edit" onclick="edit(${i.id})">
                    <i class="fas fa-pen-to-square"></i>
                    <span>Edit</span>
                </button>
                <button class="btn btn-delete" onclick="del(${i.id}, this)">
                    <i class="fas fa-trash-can"></i>
                    <span>Delete</span>
                </button>
            </div>
        `;
        list.appendChild(card);
    });
})
.catch(err => {
    console.error('Error:', err);
    document.getElementById("countNum").textContent = "—";
    const list = document.getElementById("list");
    list.innerHTML = '';
    const errEl = document.getElementById("errorState");
    errEl.style.display = "block";
    list.appendChild(errEl);
});

function edit(id) {
    window.location.href = `company-post-Internship.html?id=${id}`;
}

function del(id, btn) {
    if (confirm("Are you sure you want to delete this internship? This action cannot be undone.")) {
        btn.querySelector('span').textContent = 'Deleting...';
        btn.disabled = true;

        fetch(`${BASE_URL}/api/internships/delete/${id}`, {
            method: "DELETE"
        })
        .then(res => {
            if (!res.ok) throw new Error("Delete failed");
            location.reload();
        })
        .catch(err => {
            console.error('Delete error:', err);
            alert('Error deleting internship. Please try again.');
            btn.querySelector('span').textContent = 'Delete';
            btn.disabled = false;
        });
    }
}
</script>

</body>
</html>